(function(){angular.module("seattweetApp",["ngRoute","ngSanitize","ui.bootstrap","ngAnimate"]);function t(t,e){t.when("/",{templateUrl:"home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/about",{templateUrl:"/common/views/genericText.view.html",controller:"aboutCtrl",controllerAs:"vm"}).when("/location-stream/:locationid",{templateUrl:"/locationStreams/locationStreams.view.html",controller:"locationStreamsCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"});e.html5Mode({enabled:true,requireBase:false})}angular.module("seattweetApp").config(["$routeProvider","$locationProvider",t])})();(function(){angular.module("seattweetApp").controller("homeCtrl",t);t.$inject=["locationsData"];function t(t){var e=this;e.pageHeader={title:"BLEACHEERZ",strapline:"Find the best tweets from sporting events"};e.sports=[{name:"CFB"},{name:"NFL"},{name:"NBA"}];e.message="Searching for Locations";t.locationsList().success(function(t){e.message=t.length>0?"":"No locations found";e.data={locations:t}}).error(function(t){e.message="Sorry, something's gone wrong "})}})();(function(){angular.module("seattweetApp").controller("aboutCtrl",t);function t(){var t=this;t.pageHeader={title:"About BLEACHEERZ"};t.main={content:"The best fan streams from the best sports venues. \n\n The more your stream the higher you rank"}}})();(function(){angular.module("seattweetApp").controller("locationStreamsCtrl",t);t.$inject=["$routeParams","locationsData","socket","$scope","$document","$timeout"];function t(t,o,n,a,i,r){var l=this;var c=[];l.newTweetsCount=0;l.totalStreamsLoaded=0;l.locationid=t.locationid;l.pageHeader={title:"Room is : "+l.locationid,strapline:"StrapLine is "+l.locationid};n.init();n.emit("join",{newRoom:l.locationid,locationid:l.locationid});o.locationStreamsById(l.locationid).success(function(t){t.forEach(function(t,e){t.containsInstagram=false;t.date=new Date(t.date);if(t.image_url){t.instagram=t.image_url+"media/?size=m";t.containsInstagram=true}c.push(t)});n.on("tweet",function(t){l.newTweetsCount++});l.pageHeader={};l.data={tweets:c};l.totalStreamsLoaded=l.data.tweets.length;console.log("locationStreamsById");r(e(),0)}).error(function(t){console.log(t)});a.loadNewStreams=function(){var t=l.newTweetsCount;l.newTweetsCount=0;o.locationNewStreamsById(l.locationid,t,0).success(function(t){t.forEach(function(t,e){t.date=new Date(t.date);t.containsInstagram=false;if(t.image_url){t.instagram=t.image_url+"media/?size=m";t.containsInstagram=true}c.push(t)});l.data={tweets:c};l.totalStreamsLoaded=l.data.tweets.length;console.log("loadNewStreams");r(e(),0)}).error(function(t){console.log(t)})};a.$on("$destroy",function(){n.emit("leave")});a.loadOlderStreams=function(){var t=20;var n=l.newTweetsCount+l.totalStreamsLoaded;console.log(n);o.locationNewStreamsById(l.locationid,t,n).success(function(t){t.forEach(function(t,e){t.date=new Date(t.date);t.containsInstagram=false;if(t.image_url){t.instagram=t.image_url+"media/?size=m";t.containsInstagram=true}c.push(t)});l.data={tweets:c};l.totalStreamsLoaded=l.data.tweets.length;e()}).error(function(t){console.log(t)})}}window.twttr=function(t,e,o){console.log("here in window.twttr");console.log(t);console.log(e);console.log(o);var n,a,i=t.getElementsByTagName(e)[0];if(t.getElementById(o))return;a=t.createElement(e);console.log(a);a.id=o;console.log(i);while(t.getElementsByTagName(e).length<1){console.log(here)}a.src="../twitter/widgets.js";a.async=false;console.log(a);console.log(i);console.log(t.getElementsByTagName(e));i.parentNode.insertBefore(a,i);return window.twttr||(n={_e:[],ready:function(t){n._e.push(t)}})}(document,"script","twitter-wjs");function e(){console.log("here");setTimeout(function(){window.twttr.ready(function(t){console.log(t);t.widgets.load()})},1e3)}})();(function(){angular.module("seattweetApp").controller("leftNavigationCtrl",t);t.$inject=["locationsData"];function t(t){var e=this;t.sportsForLocation().success(function(t){console.log(t);e.sports=t})}})();(function(){angular.module("seattweetApp").service("locationsData",t);t.$inject=["$http"];function t(t){var e=function(){return t.get("/api/locations")};var o=function(e){return t.get("/api/location-stream/"+e)};var n=function(e,o,n){return t.get("/api/location-stream/"+e+"?lim="+o+"&skip="+n)};var a=function(){return t.get("/api/sportsForLocation")};return{locationsList:e,locationStreamsById:o,locationNewStreamsById:n,sportsForLocation:a}}})();(function(){angular.module("seattweetApp").factory("socket",t);t.$inject=["$rootScope"];function t(t){console.log("in socket.io init");var e;return{init:function(){e=io("/seattweet")},on:function(o,n){e.on(o,function(){var o=arguments;t.$apply(function(){n.apply(e,o)})})},emit:function(o,n,a){e.emit(o,n,function(){var o=arguments;t.$apply(function(){if(a){a.apply(e,o)}})})}}}})();(function(){angular.module("seattweetApp").directive("ratingStars",t);function t(){return{restrict:"EA",scope:{thisRating:"=rating"},templateUrl:"/common/directives/ratingStars/ratingStars.template.html"}}})();(function(){angular.module("seattweetApp").directive("footerGeneric",t);function t(){return{restrict:"EA",templateUrl:"/common/directives/footerGeneric/footerGeneric.template.html"}}})();(function(){angular.module("seattweetApp").directive("navigation",t);function t(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.template.html"}}})();(function(){angular.module("seattweetApp").directive("leftNavigation",t);function t(){return{restrict:"EA",templateUrl:"/common/directives/leftNavigation/leftNavigation.template.html",controller:"leftNavigationCtrl",controllerAs:"ln"}}})();(function(){angular.module("seattweetApp").directive("rightNavigation",t);function t(){return{restrict:"EA",templateUrl:"/common/directives/rightNavigation/rightNavigation.template.html"}}})();(function(){angular.module("seattweetApp").directive("pageHeader",t);function t(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/pageHeader/pageHeader.template.html"}}})();(function(){angular.module("seattweetApp").directive("windowScroll",t);function t(){return function(t,e,o){var n=e[0];var a=function(e){var a=n.getBoundingClientRect();if(a.bottom<=window.innerHeight){t.$apply(o.windowScroll)}};angular.element(window).bind("scroll load",a)}}})();(function(){angular.module("seattweetApp").filter("addHtmlLineBreaks",t);function t(){return function(t){var e=t.replace(/\n/g,"<br/>");return e}}})();