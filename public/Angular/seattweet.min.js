(function(){angular.module("seattweetApp",["ngRoute","ngSanitize","ui.bootstrap","ngAnimate"]);function t(t,e){t.when("/",{templateUrl:"home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/about",{templateUrl:"/common/views/genericText.view.html",controller:"aboutCtrl",controllerAs:"vm"}).when("/location-stream/:locationid",{templateUrl:"/locationStreams/locationStreams.view.html",controller:"locationStreamsCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"});e.html5Mode({enabled:true,requireBase:false})}angular.module("seattweetApp").config(["$routeProvider","$locationProvider",t])})();(function(){angular.module("seattweetApp").controller("homeCtrl",t);t.$inject=["locationsData"];function t(t){var e=this;e.pageHeader={title:"BLEACHEERZ",strapline:"Find the best tweets from sporting events"};e.sports=[{name:"CFB"},{name:"NFL"},{name:"NBA"}];e.message="Searching for Locations";t.locationsList().success(function(t){e.message=t.length>0?"":"No locations found";e.data={locations:t}}).error(function(t){e.message="Sorry, something's gone wrong "})}})();(function(){angular.module("seattweetApp").controller("aboutCtrl",t);function t(){var t=this;t.pageHeader={title:"About BLEACHEERZ"};t.main={content:"The best fan streams from the best sports venues. \n\n The more your stream the higher you rank"}}})();(function(){angular.module("seattweetApp").controller("locationStreamsCtrl",e);function t(){setTimeout(function(){window.twttr.ready(function(t){console.log(t);t.widgets.load()})},1e3)}e.$inject=["$routeParams","locationsData","socket","$scope","$document"];function e(e,n,o,a,i){var r=this;var l=[];r.newTweetsCount=0;r.totalStreamsLoaded=0;r.locationid=e.locationid;r.pageHeader={title:"Room is : "+r.locationid,strapline:"StrapLine is "+r.locationid};o.init();o.emit("join",{newRoom:r.locationid,locationid:r.locationid});n.locationStreamsById(r.locationid).success(function(t){t.forEach(function(t,e){t.containsInstagram=false;t.date=new Date(t.date);if(t.image_url){t.instagram=t.image_url+"media/?size=m";t.containsInstagram=true}l.push(t)});o.on("tweet",function(t){r.newTweetsCount++});r.pageHeader={};r.data={tweets:l};r.totalStreamsLoaded=r.data.tweets.length}).error(function(t){console.log(t)});a.loadNewStreams=function(){var e=r.newTweetsCount;r.newTweetsCount=0;n.locationNewStreamsById(r.locationid,e,0).success(function(e){e.forEach(function(t,e){t.date=new Date(t.date);t.containsInstagram=false;if(t.image_url){t.instagram=t.image_url+"media/?size=m";t.containsInstagram=true}l.push(t)});r.data={tweets:l};r.totalStreamsLoaded=r.data.tweets.length;t()}).error(function(t){console.log(t)})};i.ready(function(){t()});a.$on("$destroy",function(){o.emit("leave")});a.loadOlderStreams=function(){var e=20;var o=r.newTweetsCount+r.totalStreamsLoaded;console.log(o);n.locationNewStreamsById(r.locationid,e,o).success(function(e){e.forEach(function(t,e){t.date=new Date(t.date);t.containsInstagram=false;if(t.image_url){t.instagram=t.image_url+"media/?size=m";t.containsInstagram=true}l.push(t)});r.data={tweets:l};r.totalStreamsLoaded=r.data.tweets.length;t()}).error(function(t){console.log(t)})}}})();(function(){angular.module("seattweetApp").controller("leftNavigationCtrl",t);t.$inject=["locationsData"];function t(t){var e=this;t.sportsForLocation().success(function(t){console.log(t);e.sports=t})}})();(function(){angular.module("seattweetApp").service("locationsData",t);t.$inject=["$http"];function t(t){var e=function(){return t.get("/api/locations")};var n=function(e){return t.get("/api/location-stream/"+e)};var o=function(e,n,o){return t.get("/api/location-stream/"+e+"?lim="+n+"&skip="+o)};var a=function(){return t.get("/api/sportsForLocation")};return{locationsList:e,locationStreamsById:n,locationNewStreamsById:o,sportsForLocation:a}}})();(function(){angular.module("seattweetApp").factory("socket",t);t.$inject=["$rootScope"];function t(t){console.log("in socket.io init");var e;return{init:function(){e=io("/seattweet")},on:function(n,o){e.on(n,function(){var n=arguments;t.$apply(function(){o.apply(e,n)})})},emit:function(n,o,a){e.emit(n,o,function(){var n=arguments;t.$apply(function(){if(a){a.apply(e,n)}})})}}}})();(function(){angular.module("seattweetApp").directive("ratingStars",t);function t(){return{restrict:"EA",scope:{thisRating:"=rating"},templateUrl:"/common/directives/ratingStars/ratingStars.template.html"}}})();(function(){angular.module("seattweetApp").directive("footerGeneric",t);function t(){return{restrict:"EA",templateUrl:"/common/directives/footerGeneric/footerGeneric.template.html"}}})();(function(){angular.module("seattweetApp").directive("navigation",t);function t(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.template.html"}}})();(function(){angular.module("seattweetApp").directive("leftNavigation",t);function t(){return{restrict:"EA",templateUrl:"/common/directives/leftNavigation/leftNavigation.template.html",controller:"leftNavigationCtrl",controllerAs:"ln"}}})();(function(){angular.module("seattweetApp").directive("rightNavigation",t);function t(){return{restrict:"EA",templateUrl:"/common/directives/rightNavigation/rightNavigation.template.html"}}})();(function(){angular.module("seattweetApp").directive("pageHeader",t);function t(){return{restrict:"EA",scope:{content:"=content"},templateUrl:"/common/directives/pageHeader/pageHeader.template.html"}}})();(function(){angular.module("seattweetApp").directive("windowScroll",t);function t(){return function(t,e,n){var o=e[0];var a=function(e){var a=o.getBoundingClientRect();if(a.bottom<=window.innerHeight){t.$apply(n.windowScroll)}};angular.element(window).bind("scroll load",a)}}})();(function(){angular.module("seattweetApp").filter("addHtmlLineBreaks",t);function t(){return function(t){var e=t.replace(/\n/g,"<br/>");return e}}})();